<head>
	<title>ws2016</title>
</head>

<template name="Home">
	<div class="vertical-center text-center" style="width: 100%;">
		<div>
			<img id="logo" src="search.png"/>
		</div>
		<div class="text-center">
			<span style="font-size: 32px;">Mini Music</span>
		</div>
		<div class="container-fluid" style="padding-left: 20%; padding-right: 20%;">
			{{> Search}}
		</div>
	</div>
</template>

<template name="Results">
	<div class="container-fluid" style="background: #dddddd;">
		{{> Search}}
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">{{getResultsLabel}}</span>
	</div>
	<div class="container-fluid">
		<span style="font-size: 12px;" class="pull-right">{{getNumberOfResults}}</span>
	</div>
	<div class="container-fluid">
		<!-- Results table -->
		<table class="table table-hover">
			{{#if isSearchType "artist"}}
				{{> ArtistsTable results=getResults full=true }}
			{{/if}}

			{{#if isSearchType "record"}}
				{{> RecordsTable results=getResults full=true }}
			{{/if}}

			{{#if isSearchType "track"}}
				{{> TracksTable results=getResults full=true }}
			{{/if}}
		</table>
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">{{getSearchLabel}}</span>
	</div>
	<br>
	<div class="container-fluid">
		<!-- Recommendation table -->
		<table class="table table-hover">
			{{#if isSearchType "artist"}}
				{{> ArtistsTable results=getRecommendations full=true }}
			{{/if}}

			{{#if isSearchType "record"}}
				{{> RecordsTable results=getRecommendations full=true }}
			{{/if}}

			{{#if isSearchType "track"}}
				{{> TracksTable results=getRecommendations full=true }}
			{{/if}}
		</table>
	</div>

</template>

<template name="Artist">
	<div class="container-fluid" style="background: #dddddd;">
		{{> Search}}
	</div>
	<br>
	<div class="container-fluid">
		<img src={{getArtist.img}} class="img-rounded pull-left" style="margin-right: 10px;
			width: 150px; height: 150px;"> <!-- Fixed width and height -->
		<div class="pull-left">
			<span style="font-size: 18px;"><b>{{getArtist.name}}</b>,</span>
			<span style="font-size: 16px;"> Portugal</span><br>
			<span style="font-size: 14px;">
				<a href={{getArtist.homepage}}>{{getArtist.homepage}}</a>
			</span>
		</div>
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">Biography</span><br>
		<span style="font-size: 14px;">{{getArtist.biography}}</span>
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">Discography</span><br>
		<table class="table table-hover">
			{{> RecordsTable results=getArtist.records full=false }}
		</table>
	</div>
</template>

<template name="Record">
	<div class="container-fluid" style="background: #dddddd;">
		{{> Search}}
	</div>
	<br>
	<div class="container-fluid">
		<img src={{getRecord.img}} class="img-rounded pull-left" style="margin-right: 10px;
			width: 150px; height: 150px;"> <!-- Fixed width and height -->
		<div class="pull-left">
			<span style="font-size: 18px;"><b>{{getRecord.name}}, </b></span>
			<span style="font-size: 16px;">
				<a href="/artist/{{getRecord.artist_id}}">{{getRecord.artist}}</a>
			</span><br>
			<span style="font-size: 14px;">{{getRecord.ntracks}} Tracks</span>
		</div>
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">Description</span><br>
		<span style="font-size: 14px;">{{getRecord.description}}</span>
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">Tags</span><br>
		{{#each getRecord.tags}}
			<a href="/results?keyword={{this}}&type=tag">{{this}}</a>
		{{/each}}
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">Tracks</span><br>
		<table class="table table-hover">
			{{> TracksTable results=getRecord.tracks full=false }}
		</table>
	</div>
</template>

<template name="Track">
	<div class="container-fluid" style="background: #dddddd;">
		{{> Search}}
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;"><b>{{getTrack.title}}</b>, </span>
		<span style="font-size: 16px;"><a href="/artist/{{getTrack.artist_id}}">{{getTrack.artist}}</a></span>
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">Lyrics</span><br>
		<span style="font-size: 14px;">{{getTrack.lyrics}}</span>
	</div>
	<br>
	<div class="container-fluid">
		<span style="font-size: 18px;">License</span><br>
		<span style="font-size: 14px;"><a href={{getTrack.license}}>{{getTrack.license}}</a></span>
	</div>
</template>

<template name="Search">
	<div id="top-bar" class="row">
		<div class="pull-left">
			<select id="search-type" class="form-control">
				<option value="artist">Artist</option>
				<option value="record">Record</option>
				<option value="track">Track</option>
				<option value="genre">Genre</option>
				<option value="lyric">Lyric</option>
				<option value="tag">Tag</option>
			</select>
		</div>
		<div class="input-group" style="padding-left: 10px;">
			<input id="search-input" type="text" class="form-control">
			<div class="input-group-btn">
				<!-- TODO: Find out how to fix the search button height in Chrome -->
				<button id="search-btn" class="btn btn-default" type="button">
					<i class="glyphicon glyphicon-search"></i>
				</button>
			</div>
		</div>
	</div>
</template>

<template name="ArtistsTable">
	<thead>
		<tr>
			<th>Name</th>
			<th>Homepage</th>
			<th>Area</th>
		</tr>
	</thead>
	<tbody>
		{{#each results}}
			<tr>
				<td><a href="/artist/{{artist_id}}">{{name}}</a></td>
				<td><a href={{homepage}}>{{homepage}}</a></td>
				<td>{{area}}</td>
			</tr>
		{{/each}}
	</tbody>
</template>

<template name="RecordsTable">
	<thead>
		<tr>
			<th>Title</th>
			{{#if full}}
			<th>Artist</th>
			{{/if}}
			<th>Type</th>
			<th>Number of Tracks</th>
			<th>Tags</th>
		</tr>
	</thead>
	<tbody>
		{{#each results}}
			<tr>
				<td><a href="/record/{{record_id}}">{{title}}</a></td>
				{{#if ../full}}
				<td><a href="/artist/{{artist_id}}">{{artist}}</a></td>
				{{/if}}
				<td>{{type}}</td>
				<td>{{ntracks}}</td>
				<td>
					{{#each tags}}
						<a href="/results?keyword={{this}}&type=tag">{{this}}</a>
					{{/each}}
				</td>
			</tr>
		{{/each}}
	</tbody>
</template>

<template name="TracksTable">
	<thead>
		<tr>
			<th>Title</th>
			<th>Artist</th>
			<th>Track Number</th>
			<th>License</th>
		</tr>
	</thead>
	<tbody>
		{{#each results}}
			<tr>
				<td><a href="/track/{{track_id}}">{{title}}</a></td>
				<td><a href="/artist/{{artist_id}}">{{artist}}</a></td>
				<td>{{number}}</td>
				<td>{{license}}</td>
			</tr>
		{{/each}}
	</tbody>
</template>

<template name="Page404">
	<div class="vertical-center text-center" style="width: 100%;">
		<span style="font-size: 128px; color: #2f4f4f">404</span><br>
		<span style="font-size: 18px; color: #2f4f4f">Page not found!</span>
	</div>
</template>
